<app-nav></app-nav>
<br>
<form method="post">
    <div class="card-columns d-flex justify-content-center align-items-center">
        <div class="card">
            <mat-form-field class="input-container">
                <mat-label>CUIL</mat-label>
                <input matInput type="text" placeholder="datos..." name="cuil" id="cuil" [(ngModel)]="cuil" required>
            </mat-form-field>
        </div>

        <div class="card">
            <mat-form-field class="input-container">
                <mat-label>PERIODO</mat-label>
                <input matInput type="text" placeholder="datos..." name="periodo" id="periodo" [(ngModel)]="periodo" required>
            </mat-form-field>
        </div>


    </div>
    
    <div class="container">
        <button mat-raised-button color="primary" type="button" (click)="update_table()">Buscar</button>
        <button class="button-right" mat-fab aria-label="Example icon button with a delete icon"
            (click)="uploadToListado(element)">
            <mat-icon>person</mat-icon>
        </button>
    </div>
</form>

<div class="text-center">
    <h1 class="mt-1 mb-5 pb-1">
        <span>LISTA DE EMPRESAS</span>
    </h1>
</div>

<div class="mat-elevation-z8 mat-table-responsive scroll-y">
    <table mat-table [dataSource]="dataSource" id="names">

        <!-- Id Column -->
        <ng-container matColumnDef="emp_id">
            <th mat-header-cell *matHeaderCellDef class=" text-center"> ID EMPRESA </th>
            <td mat-cell *matCellDef="let element" class=" text-center"> {{element.emp_id}} </td>
        </ng-container>

        <!-- Id Column -->
        <ng-container matColumnDef="emp_cuit">
            <th mat-header-cell *matHeaderCellDef class=" text-center"> CUIT </th>
            <td mat-cell *matCellDef="let element" class=" text-center">
                <a href="javascript:void(0)" (click)="navigateToAfiliado(element)">{{ element.emp_cuit }}</a>
            </td>
        </ng-container>

        <!-- Id Column -->
        <ng-container matColumnDef="emp_razonsocial">
            <th mat-header-cell *matHeaderCellDef class=" text-center"> RAZON SOCIAL </th>
            <td mat-cell *matCellDef="let element" class=" text-center"> {{element.emp_razonsocial}} </td>
        </ng-container>

        <!-- Id Column -->
        <ng-container matColumnDef="total">
            <th mat-header-cell *matHeaderCellDef class=" text-center"> TOTAL </th>
            <td mat-cell *matCellDef="let element" class=" text-center"> {{element.total}} </td>
        </ng-container>

        <!-- Id Column -->
        <ng-container matColumnDef="titulares">
            <th mat-header-cell *matHeaderCellDef class=" text-center"> TITULARES </th>
            <td mat-cell *matCellDef="let element" class=" text-center"> {{element.titulares}} </td>
        </ng-container>

        <!-- Id Column -->
        <ng-container matColumnDef="activos">
            <th mat-header-cell *matHeaderCellDef class=" text-center"> ACTIVOS </th>
            <td mat-cell *matCellDef="let element" class=" text-center"> {{element.activos}} </td>
        </ng-container>

        <!-- Id Column -->
        <ng-container matColumnDef="inactivos">
            <th mat-header-cell *matHeaderCellDef class=" text-center"> INACTIVOS </th>
            <td mat-cell *matCellDef="let element" class=" text-center"> {{element.inactivos}} </td>
        </ng-container>

        <!-- Id Column -->
        <ng-container matColumnDef="inconsistencias">
            <th mat-header-cell *matHeaderCellDef class=" text-center"> INCONSISTENCIA </th>
            <td mat-cell *matCellDef="let element" class=" text-center"> {{element.inconsistencias}} </td>
        </ng-container>

        <!-- Dynamic Month Columns -->
        <ng-container *ngFor="let month of months" [matColumnDef]="month">
            <th mat-header-cell *matHeaderCellDef class="text-center"> {{ month }} </th>
            <td mat-cell *matCellDef="let element" class="text-center">
                {{ element[month] }}
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 20, 50, 100]" showFirstLastButtons (page)="onPageChange($event)"
        [length]="totalRegistros" [pageSize]="registrosPorPagina" aria-label="Select page of periodic elements">
    </mat-paginator>
</div>